# Network

블록체인의 네트워크는 p2p라는 단어를 빼놓을 수 없다.
p2p를 코드로 보면.

`net`라이브러리를 사용해서 client와 server측 코드를 작성한적이있다.
그때 client 코드보단 server 코드를 많이 작성했었다.

하지만 P2P라는 것은 client와 server 코드가 모두 작동되는 서버라고 간단하게 설명할 수 있다.

기존엔 server을 만들고, listen을 이용해서 대기하면서 요청을 오기 기다리는 서버를 만들었지만, p2p는 내가 요청을 하지만 나한테 커넥션을 할 수 있는 코드를 작성할 것이다.

한가지 노드에서 서버도 될 수 있고 ,반대로 다른 노드에 요청을 할 수 있느 코드를 작성한다. 이 통신 방식을 p2p라고 말한다.

# Bitcoin, Ethereum

비트코인, 이더리움에서 사용하는 메인넷에서는 기본적인 노드들끼리의 통신은 TCP통신 방식을 이용하지만, WS을 이용해서 작성할 것이다.

브라우저에서노드로 데이터를 얻기 위해서 요청을 할 때는 통신을 해야하는데, Node는 http(80), ws(443) 에 대한 포트를 열어야 한다. 그리고 cors에 대한 처리도 해야한다.

하지만 실제 메인넷의 노드-노드들은 TCP를 위한 포트를 열어서 통신을 진행한다.

## node

Node들은 3가지의 Port를 가질 수 있다.
크게 2가지로 분류할 수 있다.
웹브라우저와 클라이언트(요청을 받을 수 있는 수단?) 관련된 포트가 2개

-   http
    -   rpc : 서버가 가지고 있던 내용을 실행했는지 안했는지에 대한 결과만 가지고 있다.(메서드 호출했다.)
        일반적인 http에서는 메서드를 호출하고 호출해서 얻은 결과값을 client에게 응답해주지만,
        rcp는 메서드를 호출했는지 안했는지에 대한 결과만 줄 뿐이다.
        최근에는 블록체인이 rcp -> http로 변화되고 있다.
-   ws

Node끼리 상호작용 할 수 있는 port가 1개

-   tcp

# 예시.

블록체인 생태계가 있을 때, 블록익스플로어 화면을 구성한다했을 때,
제일 정상적인 방법을 이용해서 데이터를 얻는 방법은
언어별로 만들어진 해당 노드를 구성하는 파일을 클론하여 실행시킨 후 다른 노드에게 요청을 해서 데이터를 얻는다. ( 내가 생태계에 어떤 한 노드가 되어 데이터를 얻는다. )
하지만 현재까지 있는 블록의 전체를 받아와야하기 때문에, 이렇게 하면 다른 노드들과의 싱크를 맞추는 과정이 오래걸리고, 필요한 하드 등 서버에 대한 비용이 많이 들어간다.

이를 대체하기위해서 우리가 직접적으로 블록체인 생태계에 직접 참여하지 않고 대신 API에 의존하여 상호 작용하는 경우 일반적으로 사용되는 서비스 중 하나가 Infura입니다.
Infura는 개발자가 자체 전체 노드를 실행할 필요 없이 이더리움을 포함한 블록체인 네트워크에 액세스할 수 있도록 하는 인기 있는 API 공급자이다.
안정적이고 확장 가능한 인프라를 제공하여 블록체인과 상호작용하는 간소화된 방법을 제공합니다.

Infura를 사용하면 API 엔드포인트를 활용하여 블록체인 데이터를 검색하고 트랜잭션을 전송하고 스마트 계약과 상호 작용할 수 있습니다.
이를 통해 자체 블록체인 노드를 실행하고 유지하는 복잡성과 오버헤드 없이 블록체인 기능에 액세스하고 정보를 검색할 수 있습니다.

Infura를 사용하려면 일반적으로 계정에 가입하고 API 키를 받아야 합니다.
API 키를 사용하여 요청을 인증하고 Infura 엔드포인트에 대한 API 호출을 수행할 수 있습니다.
특정 API 끝점 및 메서드는 대상으로 하는 블록체인 네트워크(예: Ethereum 메인넷, 테스트넷 등)에 따라 다릅니다.

Infura의 API를 활용하면 광범위한 인프라 설정 없이도 블록체인 기능을 애플리케이션에 통합하고 분산형 애플리케이션(dApp)을 구축하고 블록체인 생태계와 상호 작용할 수 있습니다.

# Node

우리는 노드를 만들때, HTTP 통신을 위한 포트, 노드와의 상호작용을 위한 WS 포트 만들 것이다.
TCP에 대한 내용을 안함...

# 목표

wallet(브라우저) 과 wallet을 그리는 front 서버, 노드를 만들 예정이다.

# Dapp

추후에 디앱을 만드는 과정에서도 그림을 이해하고 있으면 좋을 것이다.

## 중앙화와 탈중앙화

요청을 보내는 종착지가 서버가 1개이냐 분산적으로 저장하고 있냐에 따라서 중앙화/탈중앙화로 나뉠 수 있다.

어떤 작업을 할 때, 요청을 하는 곳이 중앙화냐 아니냐라는 것이다. 그래서 크게 다를것이 없다.

# 만들어야할 것.

## Node

-   http -> express
-   ws -> node들 간에 통신을 위해서

## client

-   wallet : 내가 가지고 있는돈은 얼마나 있는지, 이 돈을 상대방에게 주고 싶을 떄,

어떤 흐름으로 돌아가는지 배워야한다. 단순히 구현을 위한 것이아닌...

## 1차 목표

노드 1개일 때의 상황을 구현 할 것이다.
