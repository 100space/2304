-   학습목표:
    -   깔끔한 코드 작성
    -   블록체인 개념 이해하기

# 블록체인

블록체인은 서버에 데이터를 기록하고 그걸 추적할 수 있어야하며, 변하지 않아야 한다.

## 블록체인이 중요한 이유

완전 투명성을 갖춘 즉각적인 공유 정보를 허가된 네트워크 구성원만 액세스 할 수 있는 불변 원장에 저장하여 제공하기 때문이다.

## 트랜젝션

이중지불 : 1000원을 가진사람이 다른 사람에게 500원을 주려고 할 때, 1000원에서 500원으로 감소하는 row랑, 0원에서 500원으로 늘어나는 row가 있다.
만약 A에서 -를 하고 B에서 +하는 과정에서 에러가 발생하게되면 이중지불이라고 할 수 있다. -를하고 +를하는 반대의 개념도 마찬가지이다.
2개의 데이터가 하나로 합쳐져야하는 것이 트렌잭션이라고 할 수 있다. ?

## 원장

일종의 기록으로 중요한 정보나 데이터를 기록하고 관리한다.

### 분산원장

저장한 기록을 다른 사람들한테(여러군데에) 똑같이 기록한다.
저장하는 곳 하나하나가 다 서버의 개념이다.

만약 해커가 어떠한 서버 1개에 데이터를 조작하게 되면, 모든 서버를 검사해서 조작된 데이터를 아웃시킨다.

## 중앙화

현재 우리가 만든 웹서비스는 백엔드 서버가 죽으면 아무 서비스를 이용할 수 없다.
이런식으로 하나에 의존하는 것을 중앙화라고 할 수 있다.

## 탈중앙화

블록체인은 서버하나하나가 메인이다. (블록체인의 한 서버를 (노드)라고한다.)
똑같은 코드가 다 똑같이 켜져 있다. 데이터를 받으면 주변에 똑같은 데이터를 던져주는 과정이 있다.
비슷한 개념으로 p2p가 있다.

# 배워야할 것

블록체인
트랜잭션
지갑

## 지금까지 배운 용어들로 이해해보기

블록 : 데이터베이스의 역할이며, 한개의 블록은 객체의 형태를 가지고 있다.
체인 : 각각 전후 블록과 연결하는 것을 체인이라 할 수 있다.( 배열 )

배열안에 블록이라는 것을 담고, 고유한 식별자키(블록해시)가 있는데, 이전 블록의 해시를 담고 있으며, 이를 연결하는 것이 블록체인이다.

# 비트코인

`나카모토 사토시` 라는 사람이 만들었다.
사토시라고 주장한 사람이 있었는데, 그 사람도 계좌번호 ! 본인의 지갑을 만들었을 것이고, 그게 블록체인 생태계에 저장이 되어 있을 것이다. 하지만 증명하지 못했다.

개인키, 공개키, SHA256
블록체인 네트워크는 모든 `원장`을 공개한다. 그 거래의 당사자들이 아니더라도 제 3자가 확인할 수 있어야 한다.

블록 익스플로러 : 블록에 트랜잭션이 저장이 되어 있는데 이 내용들을 웹사이트에 다 보여주는 것을 말한다.

루나 : 블록 익스플로러는 있지만, 1~50번까지의 블록이 조회가 되지 않았었다.

Hash 장점
어떤 데이터를 넣더라도 32byte 표현이 가능했다. 64글자로 표현이 가능했다.

블록 높이(넘버) 1번은 처음 생성한 블록이고, 이를 제네시스 블록이라고 한다. 처음 개발한 개발자가 가지고 있다.

### 위믹스

제네시스블록을 가지고 있는 사람이 팔아서 망함.....

## `반감기`

4년마다 블록을 생성했을 때 보상을 주는 갯수가 줄어듬.
수량이 적어지고, 화폐가치가 올라감.

## 마이닝(채굴)

`마이닝(채굴)` <-- 블록생성
블록 수가 많아지면 탈중앙화에 가까워지고, 그 블록을 많이 만들어주는 보상으로 코인을 준다.

`작업증명` POW ..

## 지갑

일반적인 계좌번호는 비밀번호를 이용하여 본인을 증명한다. 최근엔 OTP까지 추가 되어서 인증을 강화함

비트코인에서도 똑같은 프로세스가 적용된다.

-   공개키 : 계좌번호
-   개인키 : 비밀번호 - Hash 16진수 32byte 64글자...

`지갑` : 개인키를 보관하는 것을 `지갑`이라고 한다.

-   지갑 프로그램 : 대표적인게 메타마스크 <-- 이더리움 계열 지갑
    -   `콜드월렛` : 소프트웨어
    -   `하드월렛` : 하드웨어

업비트, 빗썸 : 중앙화 거래소이다. 블록체인 네트워크에 남아있는 것이 아닌 그냥 거래소 안에 남아있는 데이터이다.
비트코인이 털린것은 중앙화 거래소가 털린 것이다.

`트랜잭션 속도` 때문에 중앙 거래소를 만들었다.

`블록체인 트릴레마`

-   1. 확장성
-   2. 보안성
-   3. 탈중앙화

어느 하나만 개선할 수 없다.
속도가 빠를 수가 없다. 보안성이 높기 때문에..

속도를 올리기 위해서 중앙화가 불가피했다.
그래서 출금할 때 속도가 느린것이다.
출금할 때 블록체인 데이터를 남긴다.

`51% 공격`

블록의 구성요소
비트코인 블록의 구조

```js
{
Magic Number : ,
Block Size : ,
Verson:,
HashPrevBock : ,
Time:161231...,
data : [
    {...transaction},
    {...transaction},
    {...transaction},
    ]
}
```

## 실제 비트코인 제네시스 블록의 구조

```json
{
    "hash": "000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",
    "confirmations": 785724,
    "height": 0,
    "version": 1,
    "versionHex": "00000001",
    "merkleroot": "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b",
    "time": 1231006505,
    "mediantime": 1231006505,
    "nonce": 2083236893,
    "bits": "1d00ffff",
    "difficulty": 1,
    "chainwork": "0000000000000000000000000000000000000000000000000000000100010001",
    "nTx": 1,
    "nextblockhash": "00000000839a8e6886ab5951d76f411475428afc90947ee320161bbf18eb6048",
    "strippedsize": 285,
    "size": 285,
    "weight": 1140,
    "tx": "See 'Transaction IDs'",
    "coinbaseTx": {
        "hex": "01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff0804ffff001d02fd04ffffffff0100f2052a01000000434104f5eeb2b10c944c6b9fbcfff94c35bdeecd93df977882babc7f3a2cf7f5c81d3b09a68db7f0e04f21de5d4230e75e6dbe7ad16eefe0d4325a62067dc6f369446aac00000000",
        "txid": "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b",
        "hash": "4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b",
        "size": 204,
        "vsize": 204,
        "version": 1,
        "confirmations": 785723,
        "vin": [
            {
                "coinbase": "04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73",
                "sequence": 4294967295
            }
        ],
        "vout": [
            {
                "value": 50,
                "n": 0,
                "scriptPubKey": {
                    "asm": "04f5eeb2b10c944c6b9fbcfff94c35bdeecd93df977882babc7f3a2cf7f5c81d3b09a68db7f0e04f21de5d4230e75e6dbe7ad16eefe0d4325a62067dc6f369446a OP_CHECKSIG",
                    "hex": "4104f5eeb2b10c944c6b9fbcfff94c35bdeecd93df977882babc7f3a2cf7f5c81d3b09a68db7f0e04f21de5d4230e75e6dbe7ad16eefe0d4325a62067dc6f369446aac",
                    "reqSigs": 1,
                    "type": "pubkey",
                    "addresses": ["1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa"]
                }
            }
        ],
        "blockhash": "000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",
        "time": 1230988505,
        "blocktime": 1230988505
    },
    "totalFees": "0",
    "miner": {
        "name": "Satoshi",
        "link": "https://bitcoin.org",
        "identifiedBy": "payout address 1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa"
    },
    "subsidy": "50"
}
```

하나의 블록에는 여러개의 트랜잭션을 넣을 수 있다.

`머클루트`: 트랜잭션 내용이 변했는지 안변했는지를 확인할 수 있다.

트랜잭션마다 식별자가 있는데, 트랜잭션이 4개가 있다고 했을 때 ,
1,2를 해시화하고, 3,4를 해시화한다. 그 결과 두개를 다시 해시화한다.

한번 블록이 생성되었을 때, 머클루트를 넣어, 안의 내용을 검증하는 용도로 사용한다.

`트랜잭션`

`작업증명`
이더리움이 POW -> POS로 변경하였다.
`PoW` : Proof of Work (작업증명)

1. 블록 해시값을 사용한다. (16진수, )
2. 16진수 값을 16bit 단위 32byte = 256bit
    - 1byte = 8bit
3. 블록 해시값을 2진수로 변환을 하고, 앞에 0이 몇개 붙었는가?

블록해시 16진수 -> 2진수 -> 10진수로 변환한다.
0x5F - 01011111 -> 95

블록해시값의 크기를 비교하는 기준값 : 작업난이도(난이도 목표)

버전, + 이전블록해시 + 머클루트 + `타임` + 난이도 목표 + `논스` 를 이용해서 HASH를 만든다.(블록 해시값은 블록체인 내의 모든 거래 데이터와 이전 블록의 해시값, 그리고 논스 값을 조합하여 계산한다.)

논스 (Nonce) : 블록체인에서 블록 해시값을 계산하는 과정에서 사용되는 임의의 값

만약 블록을 만들 때 해쉬 값이 80이하로 만든다고 했을 때,
HASH가 80이 넘으면 `타임`과 `논스`를 변화시켜서 다시 해시 진행을 한다.

이런 연산이 많아지기 때문에, GPU를 필요로 한다.

## 개발자

사람을 편하게해주는 도구를 만드는 사람

내가 생각하는 개발자는? 고민해보기

유지보수.. OOP (객체지향)
많은 스택보단, 하나를 구현하더라도 예쁘게 구현하자..

oop 한문장 키워드 : 객체에 데이터를 넣지 말자 === 객체에 기능을 넣자. (기능 = 메서드)

-   데이터는 해당 메서드에서 처리한다.

설계단계가 중요하다.

-   객체 지향 설계 (SOLID)
    -   SRP
    -   OCP
    -   LSP
    -   ISP
    -   DIP

### 공부하는 방법

원칙은 이론이기 때문에, 정답이 없다.
알고 쓰는거와 모르고 쓰는 것은 다른다. ( 정답이 아니기 때문에 고집해서 쓸 필요 없다. )

요즘은 공부하기 쉽다. ( chatGPT )
~원칙인지 아닌지를 판단해줄 도구가 생겼음.

원칙과 TS를 배우는데 1주일정도 할 예정이고
2주간 블록체인 할 예정

이더리움 솔리디티도 객체지향 언어이기 때문에 잘 배우면 좋다.

5가지 원칙에 대한 내용을 먼저 배울 것이다.

OOP 설계 - 디자인 패턴

# 이더리움

-   스마트 컨트렉트 (솔리디티)
