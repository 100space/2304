# Transaction

```js
const tx = {
    from: "",
    to: "",
    value: "",
    data: "",
}
```

data 속성이 있으면 스마트 컨트렉트 실행, 및 배포지만 data 속성이 없으면 그냥 EOA간에 거래를 의미한다.

온라인강의를 들을 떄 왜 그렇게 되는지 알면서 하는 것이 중요하다..!

# NFT

일반적인 NFT 민팅을 할 떄 어떤 방식으로 어떻게 만들 것인지 지정되어있다. opensea에서는 어떤 방식으로 만들지 지정되어있지 않기 때문에

우리는 16가지의 내용을 민팅할 때마다 랜덤으로 나오게 하는 NFT를 만들 것 이다.

# struct

key=> tokenId
value => rank, type
1가지 타입에 2가지 이상의 타입을 지정하고 싶을 때 사용하는 키워드이며 객체처럼 사용한다.

```sol
    struct tokenData {
        uint256 Rank;
        uint256 Type;
    }

    mapping (uint => tokenData) public tokenDatas;
```

이 형태는 아래와 같이 표현할 수 있다.

```json
{
    "1": {
        "Rank": 1,
        "Type": 2
    }
}
```

솔리디티는 랜덤을 사용할 수 없다.
이유는 가스소비량을 추측할 수 없기 때문이다. 스마트 컨트랙트는 무조건 실행되는 것이고, 결과값이 어떻게 나오는지 확실한 것인데, 랜덤값을 선택한다는 것은 확실하게 결과가 나오는 것과, 얼마나 실행되는 것인지 확실하지 않기 때문에
가스량을 확실하게 알 수 없다. 그렇기 때문에 솔리디티에서 공식적으로 랜덤값을 주지 않는다.

랜덤이 필요하다면, 솔리디티 파일이 아닌 다른 외부에서 랜덤값을 만들고 그를 가져와서 사용하는 것이 좋다.

솔리디티는 글자를 연결할 수 없다 + 가 int 타입으로 판단하기 때무에
그래서 byte코드로 변환하여 뒤에 연결하는 과정을 하는데 이것은 메서드로 구현되어있다. abi.encodePacked("","")

# 판매컨트랙트

NFT를 만드는 CA와 NFT거래를 위한 컨트랙트

거래를 하기 위해서는 NFT를 상품 판매에 대한 등록이 필요하다.
상품 판매를 등록하게 되면 EOA계정이 구매를 할 수 있어야 한다.

구매를 했을 경우에는 구매자에게 NFT가 이동을 해야한다.

# remix

파일이 많아지고 프로젝트가 커질수록 순서에 따라서 컨트랙트를 배포해야하는데 그 과정이 remix에서는 불편하다.
그래서 truffle의 migration 파일을 이용해서 순서에 맞게 배포를 진행할 수 있다.

# 옥션 컨트랙트

옥션컨트랙트에서는 판매등록된 상태변수, 판매토큰-판매금액의 매핑이 중요하다.
의존성 주입을 하므로써 옥션의 내용이 망가져도 NFT의 내용을 해치지 않게 해야한다.

판매등록은 얼마에 파는지, 판매할 토큰아이디에대한 내용을 상태변수로 나뉜다.

화면에 그릴때는 이 상태변수에 대해서 내용을 던져주고 그것을 이용해서 작업을 한다.
