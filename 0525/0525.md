# 테스트넷

chainId가 다른 이더리움 네트워크를 테스트넷이라고 한다.
일반적인 이더리움 네트워트와 chainId만 다르고 모든 것이 같다. 실제 이더리움 네트워크는 chainId가 1번이다.

제네시스가 같더라도 chainId가 다르면 다른 네트워크라고 판단한다.

테스트넷은 이더리움 메인넷과 같은 과정으로 되기 때문에, 실제로 메인넷처럼 블록이 생성되는데 최대 30초까지 걸린다.
어떠한 동작을 하게되면 가나쉬랑 다르게 실제 블록이 생성되는 시간만큼 걸린다는 뜻이다.

우리는 메인넷이나 테스트넷에 구성되어있는 노드의 rpc url을 알 수 없기 때문에 직접적으로 연결할 수 없다.
내 컴퓨터를 노드로 만들어서 근처에 노드를 찾아서 피어를 맺어서 하는 방법이 있다. 하지만 노드를 하나 만드는데 비용이 너무 많이 들어간다. ( 포함되어 있는 데이터가 너무 많기 때문에..)
그래서 다른 방법인 노드를 운영중인 사설 서비스를 이용한다. 노드 프로바이더(infura, alchemy)에 API를 요청을 하고 이더리움 메인넷에 대신 요청을 진행한다.

API : https://goerli.infura.io/v3/fe6fb1e940ac43ea956b72a82103f2ad
API : https://sepolia.infura.io/v3/fe6fb1e940ac43ea956b72a82103f2ad

## 마이그레이션

마이그레이션을 할 때
--network 옵션을 이용해서 배포할 네트워크를 지정할 수 있다.

```bash
$ npm init -y
$ npm install @truffle/hdwallet-provider
$ npm install dotenv
```

## 콘솔로 확인하기

txHash : 0x8ba8cf40f16692240597d5f1ca11e02c707ed530d2d8ffd0031f0facda72b75b

```js
web3.eth.getTransaction("0x8ba8cf40f16692240597d5f1ca11e02c707ed530d2d8ffd0031f0facda72b75b") // 네트워크에 보낸 트렌젝션
web3.eth.getTransactionReceipt("0x7e9c7a13361d6158d3826ec99f75ec741d0a1acdeecef00403aaf07e0daf611f") // 실제 블록에 포함된 트랜잭션
```

# 컨트랙트 이벤트

트랜잭션을 보낼 때 무언가 데이터를 남긴다. (log)
블록이 생성될 때 logs를 추적하여 내용을 읽고 값이 달라졌다면 리액트의 상태를 바꿔준다.

이벤트를 작성하는 방법
"emit [이벤트명](데이터)"

ca: 0x76f2B587A4338c1cca0348b83590C2AF4b0f293C

# Dapp

Dapps은 백엔드가 없냐?

<!-- 데이터를 가지고 있을 필요가 없기 때문에.. -->

진짜 중요한 내용은 컨트랙트에 넣지만 그런 것이 아닌 정보는 중앙화처럼 DB에 넣어준다.
중요한 내용이 아닌데 그것을 컨트랙트에 넣어서 보관하게되면 저장할 때 마다 가스를 소비하게되기 때문에 좋지 않다.
만약 글쓰는 것도 컨트랙트에 관리하게 된다면 이더가 있는 사람만 글을 쓸 수 있게 된다느 말과 같다. 그렇기 때문에 백엔드가 필요하다.

블록에 내용을 추가해야하는 경우 백엔드에서 요청을 하게 되면 서명을 구현하기가 어렵기 때문에 백엔드에서 메타마스크로 요청을 보내서 처리할 수 있게 한다.

# 서명하는 방식 3가지

1. front 에서 바로 transaction 날리기 // 메타마스크
2. back 에서 Transaction 객체를 받아서 sendTransaction 하기 //데이터를 받아서
3. back 에서 바로 sendTransaction하기 // 백이 개인키를 가지고 있어야한다.

인프런
