# blockchain

데이터를 저장하는 가장 기본 단위인 블록이 제일 중요할 것이다.

제네시스 블록 : 최초의 데이터를 담은 블럭.(id=1인 블럭)
이전 블럭 해시가 없기 때문에 임의로 정해두고 이를 이용해서 2부터 쭉 만든다.

제네시스 블록은 네트워크를 구성하기 위해서 가장 중요한 블럭이다.

제네시스 블럭이 어떻게 생겼는지를 알고 이를 구성하는 것이 목표이다.

previousHash,merkleRoot,hash는 32바이트 64글자로 이루어진 해시값이 들어갈 것이다.

type은 데이터타입의 이름을 정할 수 있고, 여러가지를 조합해서 하나의 타입을 지정할 수 있다.(표기를 하기위한 역할을 할 수 있다.)

```ts
type Height = number
type width = number | null
```

블럭을 생성하는 과정에서
내가 가지고 있는 정보인

```ts
export class BlockInfo {
    public version!: string
    public height!: Height
    public timstamp!: Timestamp
    public previousHash!: Hash
    public merkleRoot!: Hash
    public nonce!: number
    public difficulty!: Difficulty
}
```

를 이용하여 해시를 만든다.
그렇기 때문에

```ts
export class IBlock extends BlockInfo {
    public hash!: Hash
}
```

타입과 인터페이스의 차이점
인터페이스의 경우는 구현체가 아니다.
instanceof 가 안된다.

class로 이루어진 경우는 class가 생성되는 것이기 때문에 어디서 부터 만들어지는지 확인할 수 있다.
class는 빌드가 되기 때문에 가능하다.

"0".repeat(64) : 0이 64글자로 채워진 수를 만들어준다.
제네시스 블록에는 이전 해시가 없기때문에 0으로 임의로 채워넣었다.

두번째 블럭을 만들기 위한 소스코드를 만들어야한다.
하지만 제네시스가 아닌 블럭들을 만들기 위해서는 previousHah 값과 diffioculty 값이 중요하다.

블럭을 만들 때 데이터의 내용도 있어야 한다.

hash를 만드는 것이 중요하기 때문에 hash부터 처리하는 걸 만들자

암호화를 위해서 관련 라이브러리를 설치하자.

```sh
$ npm install crypto-js
```

crypto-js는 나중에 빌드될때도 있어야하기 때문에 dev모드를 하면 안된다.

**static** 정적메서드에 대해서 알아보기..

hexToBinary
hex : 16진수 값
Binary : 2진수

ex) 16진수 : 00은 바이너리로 00000000로 표현할 수 있다.

16진수를 사용하는 이유, 변환하기 쉽기 때문이다. 하나의 자리수에서 16가지를 표현할 수 있고, 변환하기 편하기 때문에,

8비트 -> 1바이트 -> 2니블

16진수 한자리당 1니블, 4비트

그래서 64글자 hash는 binary로 변환하면 256글자의 0,1로 이루어진 값이 나와야한다.

//16진수, 바이트, 비트 변환 알자..

비트코인은 처리시간이 오래걸린다.
연산하는 시간이 많기 때문이다.
비트코인의 트랜잭션은 1000~2000개로 이루어져있기 때문에 해시해서 머클루트 만드는 과정이 오래걸려서 블록생성이 오래걸린다.

머클루트 생성을 위한 라이브러리

```sh
$ npm install merkle
```

# 앞으로 해야할것..

block에 대한 것은 아직하지 않았음
제네시스 블럭만 만들어봤다.

블록의 데이터인 트랜잭션을 담아야하는 것이 중요하다.

트랜잭션을 구현하는 것은 어렵지만 데이터가 트랜잭션으로 이루어졌다는 것을 알아야한다.

블록생성이라는 것은 매우매우 어려운 행위이다.
블록을 생성하면 코인을 보상을 받는다 (채굴을 해서 성공하면 생성이되고 채굴을 한 사람에게 코인으로 보상을 해준다.)

채굴을 한다는 것은 작업증명을 한다.

입장에 따라서 블록체인 생태계를 설명하는것이 다르다.
(작업증명, 블록생성, 채굴)

트랜잭션 풀
앞으로 처리해야할 트랜잭션의 목록

블록이 생성되는 시점에 처리가 완료되는 것이다.

내가 몇 BTC를 가지고 있는지 알기위해선 모든 블록의 데이터를 가지고 있으면 된다.

UTXO 돈을 보내는 방식을 설명한것
하나의 객체가 하나의 지폐라고 생각하면 편하다.

이더리움은 일반적인 개념으로 처리하고있다.
